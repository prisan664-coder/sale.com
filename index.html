<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fuji Mobile repair online Service</title>

    <link rel="shortcut icon"
        href="https://scontent.fvte1-1.fna.fbcdn.net/v/t39.30808-6/518825433_122117695760900284_354744809560286503_n.jpg?_nc_cat=102&ccb=1-7&_nc_sid=6ee11a&_nc_ohc=ldLnZ0tvy08Q7kNvwF7Ekl4&_nc_oc=AdlK_DvJpcucNDU2Pdijw4813aGABLoY7ukxzNCEhUUr9pakpwxVacXzJ08x8kQOfjg&_nc_zt=23&_nc_ht=scontent.fvte1-1.fna&_nc_gid=KGJcV5nwnpkb1syQENv5mQ&oh=00_AfjzcdNWomaPDeeWsmN0eF0-HLhLzbRNM8xBxCv2OuroFQ&oe=692D81D6"
        type="image/x-icon">
    <link rel="icon"
        href="https://scontent.fvte1-1.fna.fbcdn.net/v/t39.30808-6/518825433_122117695760900284_354744809560286503_n.jpg?_nc_cat=102&ccb=1-7&_nc_sid=6ee11a&_nc_ohc=ldLnZ0tvy08Q7kNvwF7Ekl4&_nc_oc=AdlK_DvJpcucNDU2Pdijw4813aGABLoY7ukxzNCEhUUr9pakpwxVacXzJ08x8kQOfjg&_nc_zt=23&_nc_ht=scontent.fvte1-1.fna&_nc_gid=KGJcV5nwnpkb1syQENv5mQ&oh=00_AfjzcdNWomaPDeeWsmN0eF0-HLhLzbRNM8xBxCv2OuroFQ&oe=692D81D6"
        type="image/x-icon">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background-color: #f0f0f0;
            /* ‡∏™‡∏µ‡πÄ‡∏ó‡∏≤‡∏≠‡πà‡∏≠‡∏ô */
        }

        .carousel-item img {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }

        .product-card img {
            height: 150px;
            object-fit: cover;
            cursor: zoom-in;
        }

        .product-card .copy-btn {
            cursor: pointer;
        }

        .help-btn {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .help-btn img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #0d6efd;
        }

        .help-btn a {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(90deg, #0d6efd, #6610f2);
            color: white;
            font-weight: 600;
            text-decoration: none;
            padding: 12px 20px;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .help-btn a:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
            background: linear-gradient(90deg, #6610f2, #0d6efd);
        }

        .product-card {
            border: 0;
            border-radius: 14px;
            overflow: hidden;
            transition: transform 0.25s ease, box-shadow 0.25s ease;
        }

        .product-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 12px 30px rgba(13, 110, 253, 0.15);
        }

        .product-card .card-img-top {
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .product-card .card-body {
            padding: 12px 14px;
        }

        .product-card .card-title {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 6px;
            color: #0d6efd;
        }

        .product-card .price {
            font-weight: 800;
            font-size: 1.05rem;
            color: #111;
        }

        .product-card .muted {
            color: #6c757d;
            font-size: 0.9rem;
        }

        .countdown {
            font-size: 0.9rem;
            font-weight: bold;
            color: #dc3545;
        }

        /* ************************************** */
        /* ** ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ** */
        /* ************************************** */

        .cart-icon-btn {
            position: relative;
            /* ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ badge ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ñ‡∏π‡∏Å */
            margin-left: 10px;
        }

        .cart-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            padding: 2px 6px;
            border-radius: 50%;
            background-color: #dc3545;
            /* ‡∏™‡∏µ‡πÅ‡∏î‡∏á */
            color: white;
            font-size: 0.7em;
            font-weight: bold;
        }

        /* Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ */
        #cartModal .modal-dialog {
            max-width: 600px;
        }

        #cartItems .list-group-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .item-details {
            flex-grow: 1;
        }

        .item-details small {
            display: block;
            color: #6c757d;
        }

        .item-actions button {
            margin-left: 10px;
        }

        /* Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ */
        #customerInfoModal .modal-dialog {
            max-width: 500px;
        }

        #customerInfoDisplay {
            padding: 15px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            margin-bottom: 15px;
            background-color: #f8f9fa;
        }

        #customerInfoDisplay h6 {
            color: #0d6efd;
            font-weight: bold;
            border-bottom: 1px dashed #ced4da;
            padding-bottom: 5px;
            margin-bottom: 5px;
        }

        /* Comment system styles */
        body.comment-system {
            font-family: Arial, sans-serif;
            padding: 20px;
        }

        .comment-box {
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 10px;
            background: #f5f5f5;
        }

        .actions button {
            margin-right: 5px;
            padding: 3px 8px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }

        .delete-btn {
            background: red;
            color: white;
        }

        .edit-btn {
            background: green;
            color: white;
        }

        .reply-btn {
            background: #007bff;
            color: white;
        }

        .reply-box {
            padding-left: 30px;
            margin-top: 10px;
            border-left: 2px solid #ccc;
        }
    </style>
</head>

<body>

    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm mb-4">
        <div class="container">
            <a class="navbar-brand text-primary fw-bold" href="index.html">Fuji ‡ªÄ‡∫ß‡∫±‡∫ö‡∫Ç‡∫≤‡∫ç‡∫Ç‡∫≠‡∫á‡∫≠‡∫≠‡∫ô‡ªÑ‡∫•‡∫ó‡∫ª‡ªà‡∫ß‡∫õ‡∫∞‡ªÄ‡∫ó‡∫î‡∫•‡∫≤‡∫ß</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="admin.html">For Admin Only</a></li>

                    <li class="nav-item">
                        <button class="btn btn-outline-primary cart-icon-btn" data-bs-toggle="modal"
                            data-bs-target="#cartModal">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-cart" viewBox="0 0 16 16">
                                <path
                                    d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M3.102 4l1.313 7h8.17l1.313-7zM5 12a2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2" />
                            </svg>
                            <span class="cart-badge" id="cart-count">0</span>
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container py-4">
        <h2 class="mb-4 text-primary d-flex align-items-center justify-content-between">
            ‡∫ö‡ªç‡∫•‡∫¥‡∫Å‡∫≤‡∫ô‡∫™‡ªâ‡∫≠‡∫°‡ªÅ‡∫õ‡∫á‡ªÅ‡∫•‡∫∞‡∫õ‡∫ª‡∫î‡∫•‡ªä‡∫≠‡∫î‡∫≠‡∫≠‡∫ô‡∫•‡∫≤‡∫ç‡∫ó‡∫ª‡ªà‡∫ß‡∫õ‡∫∞‡ªÄ‡∫ó‡∫î‡∫•‡∫≤‡∫ß ‡∫Ç‡∫≤‡∫ç‡ªÄ‡∫Ñ‡∫∑‡ªà‡∫≠‡∫á‡∫≠‡∫≠‡∫ô‡ªÑ‡∫•‡∫Ñ‡∫ª‡∫ö‡∫ß‡∫ª‡∫á‡∫à‡∫≠‡∫ô
            <a href="#" class="btn btn-warning btn-sm">Members</a>
        </h2>

        <div id="carouselExample" class="carousel slide mb-4">
            <div class="carousel-inner" id="carousel-inner"></div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                <span class="carousel-control-prev-icon"></span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                <span class="carousel-control-next-icon"></span>
            </button>
        </div>

        <div class="help-btn">
            <img src="https://as1.ftcdn.net/jpg/00/07/32/48/1000_F_7324864_FXazuBCI3dQBwIWY7gaWQzXskXJaTbrY.jpg"
                alt="Admin">
            <a href="Firebase.html">‡∫ï‡ªâ‡∫≠‡∫á‡∫Å‡∫≤‡∫ô‡∫™‡∫≠‡∫ö‡∫ñ‡∫≤‡∫° / ‡∫ö‡ªç‡∫•‡∫¥‡∫Å‡∫≤‡∫ô‡ªÉ‡∫î ‡∫Å‡∫ª‡∫î‡∫ó‡∫µ‡ªà‡∫ô‡∫µ‡ªâ</a>
        </div>

        <!-- User Ask / Help Products -->
        <div class="card mb-4">
            <div class="card-body">
                <h5>üì© ‡∫™‡∫≠‡∫ö‡∫ñ‡∫≤‡∫° / ‡∫Ç‡ªç‡∫Æ‡∫π‡∫ö + ‡∫Ç‡ªç‡∫•‡∫≤‡∫Ñ‡∫≤‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤</h5>
                <input type="text" id="askImage" class="form-control mb-2"
                    placeholder="‡∫ó‡∫±‡∫Å‡∫´‡∫≤‡ªÅ‡∫≠‡∫î‡∫°‡∫¥‡∫ô‡∫ó‡∫≤‡∫á Whatsapp ‡ªÄ‡∫û‡∫∑‡ªà‡∫≠‡∫Ñ‡∫ß‡∫≤‡∫°‡∫ß‡ªà‡∫≠‡∫á‡ªÑ‡∫ß">
                <textarea id="askText" class="form-control mb-2" rows="2"
                    placeholder="‡∫û‡∫¥‡∫°‡∫•‡∫≤‡∫ç‡∫•‡∫∞‡∫≠‡∫Ω‡∫î‡∫ó‡∫µ‡∫ï‡ªâ‡∫≠‡∫á‡∫™‡∫≠‡∫ö‡∫ñ‡∫≤‡∫°‡ªÄ‡∫ä‡∫±‡ªà‡∫ô ‡∫•‡∫≤‡∫Ñ‡∫≤ ‡∫Ç‡ªç‡∫•‡∫≤‡∫ç‡∫•‡∫∞‡∫≠‡∫Ω‡∫î ‡∫™‡∫ª‡∫ô‡ªÉ‡∫à"></textarea>
                <button id="askSend" class="btn btn-primary w-100">‡∫™‡∫ª‡ªà‡∫á‡∫Ç‡ªç‡ªâ‡∫Ñ‡∫ß‡∫≤‡∫°‡∫ó‡∫≤‡∫á Whatsapp</button>
            </div>
        </div>

        <div id="askList"></div>

        <h4>‡ªÇ‡∫ó‡∫•‡∫∞‡∫™‡∫±‡∫ö‡ªÑ‡∫≠‡ªÇ‡∫ü‡∫ô‡∫™‡∫∞‡ªÄ‡∫û‡∫≤‡∫∞‡∫°‡∫∑ 1</h4>
        <div class="row mb-4" id="cases-row"></div>

        <h4>Best Seller ‚≠ê</h4>
        <div class="row mb-4" id="best-seller-row"></div>

        <h4>‡ªÄ‡∫Ñ‡∫∑‡ªà‡∫≠‡∫á‡∫ó‡∫ª‡ªà‡∫ß‡ªÑ‡∫õ</h4>
        <div class="row mb-4" id="cables-row"></div>

        <h4>‡ªÇ‡∫ó‡∫•‡∫∞‡∫™‡∫±‡∫ö‡∫°‡∫∑‡∫™‡∫≠‡∫á</h4>
        <div class="row mb-4" id="phones-row"></div>

        <h4>‡ªÇ‡∫ó‡∫•‡∫∞‡∫™‡∫±‡∫ö‡∫°‡∫∑‡∫´‡∫ô‡∫∑‡ªà‡∫á</h4>
        <div class="row mb-4" id="welcome-products-row"></div>

        <!-- ========================================== -->
        <!-- comment system -->
        <!-- ========================================== -->
        <h2>üí¨ ‡∫•‡∫∞‡∫ö‡∫ª‡∫ö‡∫Ñ‡∫ß‡∫≤‡∫°‡∫Ñ‡∫¥‡∫î‡ªÄ‡∫´‡∫±‡∫ô</h2>

        <div class="mb-3">
            <input id="nameInput" type="text" placeholder="‡∫û‡∫¥‡∫°‡∫ä‡∫∑‡ªà" class="form-control mb-2">
            <textarea id="commentInput" placeholder="‡∫õ‡ªâ‡∫≠‡∫ô‡∫Ñ‡∫ß‡∫≤‡∫°‡∫Ñ‡∫¥‡∫î‡ªÄ‡∫´‡∫±‡∫ô" class="form-control mb-2" rows="3"></textarea>
            <button id="sendCommentBtn" class="btn btn-primary">‡∫Å‡∫ª‡∫î‡∫™‡∫ª‡ªà‡∫á</button>
        </div>

        <hr>

        <h3>üìå ‡∫Ñ‡∫ß‡∫≤‡∫°‡∫Ñ‡∫¥‡∫î‡ªÄ‡∫´‡∫±‡∫ô‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î</h3>
        <div id="commentList"></div>

        <!-- ========================================== -->
        <footer class="py-3 text-center">
            <p>About fujimobile repair Shop Group | Shop for Business | Send E-Gift Vouchers<br>Tips for You | Recipes
            </p>
        </footer>
    </div>

    <!-- ========================================== -->
    <!-- cart modal -->
    <!-- ========================================== -->
    <div class="modal fade" id="cartModal" tabindex="-1" aria-labelledby="cartModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="cartModalLabel">üõí‡∫Å‡∫∞‡∫ï‡ªà‡∫≤‡∫™‡∫±‡ªà‡∫á‡∫ä‡∫∑‡ªâ‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤‡∫´‡∫•‡∫±‡∫á‡∫™‡∫ª‡ªà‡∫á‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡ªÅ‡∫•‡ªâ‡∫ß‡ªÅ‡∫≠‡∫î‡∫°‡∫µ‡∫ô‡∫à‡∫∞‡∫ó‡∫±‡∫Å‡∫´‡∫≤</h5>

                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <style>
                    .center {
                        text-align: center;
                    }
                </style>

                <h7 class="center">
                    ‡∫ó‡∫∏‡∫Å‡∫Ñ‡∫±‡ªâ‡∫á‡ªÉ‡∫´‡ªâ‡∫ä‡∫≥‡∫•‡∫∞‡∫Å‡∫±‡∫ö‡ªÅ‡∫≠‡∫î‡∫°‡∫¥‡∫ô‡ªÄ‡∫ó‡∫ª‡ªà‡∫≤‡∫ô‡∫±‡ªâ‡∫ô ‡∫ô‡∫≠‡∫Å‡∫à‡∫≤‡∫Å‡∫•‡∫≤‡∫ç‡∫Å‡∫±‡∫ô‡∫ó‡∫µ‡ªÄ‡∫Å‡∫±‡∫ö‡ªÄ‡∫á‡∫¥‡∫ô‡∫õ‡∫≤‡∫ç‡∫ó‡∫≤‡∫á <br>
                    ‡ªÄ‡∫°‡∫∑‡ªà‡∫≠‡∫ó‡ªà‡∫≤‡∫ô‡∫Å‡∫ª‡∫î‡∫™‡∫±‡ªà‡∫á‡∫ä‡∫∑‡ªâ‡ªÅ‡∫•‡ªâ‡∫ß‡∫à‡∫∞‡∫°‡∫µ‡ªÅ‡∫≠‡∫î‡∫°‡∫¥‡∫ô‡∫ó‡∫±‡∫Å‡∫´‡∫≤‡∫ó‡∫≤‡∫á Whatsapp
                </h7>

                <div class="modal-body">
                    <ul class="list-group" id="cartItems">
                    </ul>
                    <div id="emptyCartMessage" class="alert alert-info mt-3" style="display:none;">
                        ‡∫ç‡∫±‡∫á‡∫ö‡ªç‡ªà‡∫°‡∫µ‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡∫Ñ‡∫≥‡∫™‡∫±‡ªà‡∫á‡∫ä‡∫∑‡ªâ
                    </div>
                </div>
                <div class="modal-footer d-flex justify-content-between">
                    <div class="fw-bold">
                        ‡∫•‡∫≤‡∫Ñ‡∫≤‡∫•‡∫ß‡∫°‡∫ó‡∫±‡∫á‡∫´‡∫°‡∫ª‡∫î: <span id="cartTotal">0 ‚Ç≠</span>
                    </div>
                    <div>
                        <button type="button" class="btn btn-sm btn-outline-danger"
                            id="clearCartBtn">‡∫•‡ªâ‡∫≤‡∫á‡∫Å‡∫∞‡∫ï‡ªà‡∫≤‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤‡ªÉ‡∫´‡∫°‡ªà</button>
                        <button type="button" class="btn btn-sm btn-success" id="checkoutBtn">‡∫™‡∫±‡ªà‡∫á‡∫ä‡∫∑‡ªâ‡ªÄ‡∫•‡∫µ‡∫ç</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ========================================== -->
    <!-- customer info modal -->
    <!-- ========================================== -->
    <div class="modal fade" id="customerInfoModal" tabindex="-1" aria-labelledby="customerInfoModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="customerInfoModalLabel">üìù‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫™‡∫≥‡∫•‡∫±‡∫ö‡∫à‡∫±‡∫î‡∫™‡∫ª‡ªà‡∫á ‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡∫õ‡ªâ‡∫≠‡∫ô‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫ó‡∫µ‡∫ñ‡∫∑‡∫Å‡∫ï‡ªâ‡∫≠‡∫á
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="customerInfoDisplay" style="display: none;">
                        <h6>‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫ó‡∫µ‡ªà‡∫•‡∫π‡∫Å‡∫Ñ‡ªâ‡∫≤‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å‡ªÑ‡∫ß‡ªâ:</h6>
                        <p class="mb-1">**‡∫ä‡∫∑‡ªà‡ªÅ‡∫•‡∫∞‡∫ô‡∫≤‡∫°‡∫™‡∫∞‡∫Å‡∫∏‡∫°:** <span id="display-name"></span>
                            <button class="btn btn-link btn-sm p-0 ms-2" onclick="editCustomerInfo()">(‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç)</button>
                        </p>
                        <p class="mb-1">**‡ªÄ‡∫ö‡∫µ‡ªÇ‡∫ó:** <span id="display-phone"></span></p>
                        <p class="mb-1">**‡ªÄ‡∫ö‡∫µ Whatsapp:** <span id="display-whatsapp"></span></p>
                        <p class="mb-1">**‡∫ó‡∫µ‡ªà‡∫¢‡∫π‡ªà:** <span id="display-address"></span>, <span id="display-city"></span>,
                            <span id="display-province"></span>
                        </p>
                        <p class="mb-1">**‡∫™‡∫≤‡∫Ç‡∫≤‡∫ù‡∫≤‡∫Å‡ªÄ‡∫Ñ‡∫∑‡ªà‡∫≠‡∫á:** <span id="display-branch"></span></p>
                    </div>

                    <form id="customerInfoForm">
                        <div class="mb-3">
                            <label for="fullName" class="form-label">‡∫ä‡∫∑‡ªà‡ªÅ‡∫•‡∫∞‡∫ô‡∫≤‡∫°‡∫™‡∫∞‡∫Å‡∫∏‡∫°</label>
                            <input type="text" class="form-control" id="fullName" required>
                        </div>
                        <div class="mb-3">
                            <label for="phoneNumber" class="form-label">‡ªÄ‡∫ö‡∫µ‡ªÇ‡∫ó</label>
                            <input type="tel" class="form-control" id="phoneNumber" required>
                        </div>
                        <div class="mb-3">
                            <label for="whatsappNumber" class="form-label">‡ªÄ‡∫ö‡∫µ Whatsapp</label>
                            <input type="tel" class="form-control" id="whatsappNumber">
                        </div>
                        <div class="mb-3">
                            <label for="currentAddress" class="form-label">‡∫ö‡ªâ‡∫≤‡∫ô‡∫¢‡∫π‡ªà‡∫õ‡∫±‡∫î‡∫à‡∫∏‡∫ö‡∫±‡∫ô</label>
                            <input type="text" class="form-control" id="currentAddress" required>
                        </div>
                        <div class="mb-3">
                            <label for="city" class="form-label">‡ªÄ‡∫°‡∫∑‡∫≠‡∫á</label>
                            <input type="text" class="form-control" id="city" required>
                        </div>
                        <div class="mb-3">
                            <label for="province" class="form-label">‡ªÅ‡∫Ç‡∫ß‡∫á</label>
                            <input type="text" class="form-control" id="province" required>
                        </div>
                        <div class="mb-3">
                            <label for="nearbyBranch" class="form-label">‡∫™‡∫≤‡∫Ç‡∫≤‡∫ù‡∫≤‡∫Å‡ªÄ‡∫Ñ‡∫∑‡ªà‡∫≠‡∫á‡∫ó‡∫µ‡ªÉ‡∫Å‡ªâ‡∫Ñ‡∫Ω‡∫á</label>
                            <input type="text" class="form-control" id="nearbyBranch">
                        </div>
                        <button type="submit" class="btn btn-primary w-100" id="saveInfoBtn">‡∫Å‡∫ª‡∫î‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô</button>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-lg btn-success w-100" id="finalOrderBtn"
                        style="display: none;">
                        ‡∫Å‡∫ª‡∫î‡∫™‡∫±‡ªà‡∫á‡∫ä‡∫∑‡ªâ‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- ========================================== -->
    <!-- Firebase + Main JS -->
    <!-- ========================================== -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
        import { getDatabase, ref as dbRef, onValue, push, set, update, remove } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-database.js";

        // *******************************************************************
        // ** Firebase config
        // *******************************************************************
        const firebaseConfig = {
            apiKey: "AIzaSyCLXIs8EaJNauHJpcnDMKU99C-uBKKR0aU",
            authDomain: "my-bank-87108.firebaseapp.com",
            databaseURL: "https://my-bank-87108-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "my-bank-87108",
            storageBucket: "my-bank-87108.appspot.com",
            messagingSenderId: "692654082797",
            appId: "1:692654082797:web:3b5f9912909ae4"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // *******************************************************************
        // ** Carousel
        // *******************************************************************
        const carouselImages = [
            "https://scontent.fvte1-1.fna.fbcdn.net/v/t39.30808-6/518825433_122117695760900284_354744809560286503_n.jpg?_nc_cat=102&ccb=1-7&_nc_sid=6ee11a&_nc_ohc=MKrqzHZlaooQ7kNvwEHhZ0w&_nc_oc=AdnPo34dhxq2GmMuhc-VA55QxG6aGQv5My9zAjwbLIstQ2iJOcP58NbatriUmsk7tHw&_nc_zt=23&_nc_ht=scontent.fvte1-1.fna&_nc_gid=h54egvksbujQOfwv1eNVSA&oh=00_Afi253Qqx8pFNBt-978qMJsErDJMBTD7TS1uHivAiQxkxg&oe=69317656",
            "https://scontent.fvte1-2.fna.fbcdn.net/v/t39.30808-6/586893306_122140940228900284_26111276145886_n.jpg?stp=cp6_dst-jpg_tt6&_nc_cat=101&ccb=1-7&_nc_sid=833d8c&_nc_ohc=IpvT14aSaT4Q7kNvwE6ArNn&_nc_oc=Adma6ja--Y0pN_IhgNApRCHVdhThWAWernXfbLSYxrx_v2j-gMGqLqwrTAEk5nnmzkU&_nc_zt=23&_nc_ht=scontent.fvte1-2.fna&_nc_gid=UXjuf_FEIhsDchwiWspLXA&oh=00_Afg43zFc9upJfVzw5FPyc4Xu1qFk4A3HSCKdWM-v5ZejFg&oe=6931835B",
            "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/2b/e5/e0/35/caption.jpg?w=900&h=500&s=1",
            "https://mobilelab.co.uk/cdn/shop/files/14993a4a-f4ca-4478-a74a-d69378e490b5.jpg?v=1741344236&width=1420",
            "https://www.superudisplay.com/wp-content/uploads/2022/10/gr-phones-mobile-shop-thumbnail.jpg",
            "https://rechiretail.com/wp-content/uploads/2020/05/Mobile-Phone-Store-Fixtures-1-2.jpg",
            "https://s3.ap-southeast-1.amazonaws.com/dlg.dialog.lk/s3fs-public/2023-10/shop-phone-mob.jpg"
        ];

        const carouselInner = document.getElementById("carousel-inner");
        carouselImages.forEach((url, i) => {
            const div = document.createElement("div");
            div.className = "carousel-item" + (i === 0 ? " active" : "");
            const img = document.createElement("img");
            img.src = url;
            img.className = "d-block w-100";
            div.appendChild(img);
            carouselInner.appendChild(div);
        });

        // *******************************************************************
        // ** Analytics tracker helper
        // *******************************************************************
        function trackEvent(eventType, data) {
            push(dbRef(db, 'analytics/' + eventType), {
                ...data,
                timestamp: Date.now()
            });
        }

        trackEvent('page_view', { page: 'index' });

        // *******************************************************************
        // ** Customer Info System
        // *******************************************************************
        let customerInfo = JSON.parse(localStorage.getItem('fuji_mobile_customer_info')) || null;
        const customerInfoForm = document.getElementById('customerInfoForm');
        const customerInfoModal = new bootstrap.Modal(document.getElementById('customerInfoModal'));
        const finalOrderBtn = document.getElementById('finalOrderBtn');
        const cartModalEl = document.getElementById('cartModal');

        function updateCustomerInfoDisplay() {
            const displayDiv = document.getElementById('customerInfoDisplay');
            const form = document.getElementById('customerInfoForm');
            const finalOrderBtn = document.getElementById('finalOrderBtn');
            const saveInfoBtn = document.getElementById('saveInfoBtn');

            if (customerInfo) {
                // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ
                document.getElementById('display-name').textContent = customerInfo.fullName;
                document.getElementById('display-phone').textContent = customerInfo.phoneNumber;
                document.getElementById('display-whatsapp').textContent = customerInfo.whatsappNumber || '-';
                document.getElementById('display-address').textContent = customerInfo.currentAddress;
                document.getElementById('display-city').textContent = customerInfo.city;
                document.getElementById('display-province').textContent = customerInfo.province;
                document.getElementById('display-branch').textContent = customerInfo.nearbyBranch || '-';

                displayDiv.style.display = 'block';
                form.style.display = 'none';
                finalOrderBtn.style.display = 'block';
            } else {
                // ‡πÅ‡∏™‡∏î‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°
                displayDiv.style.display = 'none';
                form.style.display = 'block';
                finalOrderBtn.style.display = 'none';
                saveInfoBtn.textContent = '‡∫Å‡∫ª‡∫î‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô';
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"
        window.editCustomerInfo = () => {
            // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏ü‡∏≠‡∏£‡πå‡∏°
            document.getElementById('fullName').value = customerInfo.fullName || '';
            document.getElementById('phoneNumber').value = customerInfo.phoneNumber || '';
            document.getElementById('whatsappNumber').value = customerInfo.whatsappNumber || '';
            document.getElementById('currentAddress').value = customerInfo.currentAddress || '';
            document.getElementById('city').value = customerInfo.city || '';
            document.getElementById('province').value = customerInfo.province || '';
            document.getElementById('nearbyBranch').value = customerInfo.nearbyBranch || '';

            // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°
            document.getElementById('customerInfoDisplay').style.display = 'none';
            document.getElementById('customerInfoForm').style.display = 'block';
            document.getElementById('saveInfoBtn').textContent = '‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å‡∫Å‡∫≤‡∫ô‡ªÅ‡∫Å‡ªâ‡ªÑ‡∫Ç';
            finalOrderBtn.style.display = 'none';
        }

        // Event Listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        customerInfoForm.addEventListener('submit', (e) => {
            e.preventDefault();

            customerInfo = {
                fullName: document.getElementById('fullName').value,
                phoneNumber: document.getElementById('phoneNumber').value,
                whatsappNumber: document.getElementById('whatsappNumber').value,
                currentAddress: document.getElementById('currentAddress').value,
                city: document.getElementById('city').value,
                province: document.getElementById('province').value,
                nearbyBranch: document.getElementById('nearbyBranch').value,
                timestamp: Date.now()
            };

            localStorage.setItem('fuji_mobile_customer_info', JSON.stringify(customerInfo));
            updateCustomerInfoDisplay();
            alert('‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫•‡∫π‡∫Å‡∫Ñ‡ªâ‡∫≤‡∫™‡∫≥‡ªÄ‡∫•‡∫±‡∫î‡ªÅ‡∫•‡ªâ‡∫ß! ‡∫ó‡ªà‡∫≤‡∫ô‡∫™‡∫≤‡∫°‡∫≤‡∫î‡∫Å‡∫ª‡∫î‡∫õ‡∫∏‡ªà‡∫°‡∫™‡∫±‡ªà‡∫á‡∫ä‡∫∑‡ªâ‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤‡ªÑ‡∫î‡ªâ‡ªÄ‡∫•‡∫µ‡∫ç');
            trackEvent('save_customer_info', { name: customerInfo.fullName });
        });

        // Event Listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢)
        finalOrderBtn.addEventListener('click', () => {
            submitOrder();
        });

        // Helper function to format price as Kip
        function formatPriceLAK(amount) {
            return new Intl.NumberFormat('lo-LA', {
                style: 'currency',
                currency: 'LAK',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount).replace('LAK', '‚Ç≠');
        }

        // Helper function to parse price string to number
        function parsePriceLAK(priceString) {
            const num = parseFloat(priceString.toString().replace(/[^0-9.]/g, ''));
            return isNaN(num) ? 0 : num;
        }

        async function submitOrder() {
            if (cart.length === 0 || !customerInfo) {
                alert('‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤‡∫•‡∫ª‡∫á‡ªÉ‡∫ô‡∫Å‡∫∞‡∫ï‡ªà‡∫≤ ‡ªÅ‡∫•‡∫∞ ‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫•‡∫π‡∫Å‡∫Ñ‡ªâ‡∫≤‡∫Å‡ªà‡∫≠‡∫ô‡∫™‡∫±‡ªà‡∫á‡∫ä‡∫∑‡ªâ.');
                return;
            }

            let total = cart.reduce((sum, item) => {
                const price = parsePriceLAK(item.price);
                return sum + (price * item.quantity);
            }, 0);

            const orderData = {
                customer: customerInfo,
                items: cart,
                total: total,
                status: 'New Order',
                orderDate: new Date().toISOString()
            };

            try {
                const newOrderRef = await push(dbRef(db, 'orders'), orderData);

                cart = [];
                localStorage.removeItem('fuji_mobile_cart');
                updateCartDisplay();

                // ‡∏õ‡∏¥‡∏î Modal
                const modalInst = bootstrap.Modal.getInstance(document.getElementById('customerInfoModal'));
                if (modalInst) modalInst.hide();

                alert(`‡∫™‡∫±‡ªà‡∫á‡∫ä‡∫∑‡ªâ‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤‡∫™‡∫≥‡ªÄ‡∫•‡∫±‡∫î‡ªÅ‡∫•‡ªâ‡∫ß! ‡∫Ç‡ªç‡∫Ç‡∫≠‡∫ö‡ªÉ‡∫à‡∫ó‡ªà‡∫≤‡∫ô ${customerInfo.fullName} \n‡ªÄ‡∫•‡∫Å‡∫ó‡∫µ‡∫Ñ‡∫≥‡∫™‡∫±‡ªà‡∫á‡∫ä‡∫∑‡ªâ: ${newOrderRef.key}\n‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î: ${formatPriceLAK(total)}.\n‡ªÅ‡∫≠‡∫±‡∫î‡∫°‡∫¥‡∫ô‡∫à‡∫∞‡∫ï‡∫¥‡∫î‡∫ï‡ªç‡ªà‡∫Å‡∫±‡∫ö‡∫ó‡ªà‡∫≤‡∫ô‡ªÑ‡∫ß‡ªÜ‡∫ô‡∫µ‡ªâ.\n\n‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÑ‡∫õ‡∫ó‡∫µ‡ªà Admin2.html ‡ªÄ‡∫û‡∫∑‡ªà‡∫≠‡ªÄ‡∫ö‡∫¥‡ªà‡∫á‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡∫™‡∫±‡ªà‡∫á‡∫ä‡∫∑‡ªâ.`);
                trackEvent('order_placed', { orderId: newOrderRef.key, total: total });

            } catch (error) {
                console.error("Error submitting order: ", error);
                alert("‡ªÄ‡∫Å‡∫µ‡∫î‡∫Ç‡ªç‡ªâ‡∫ú‡∫¥‡∫î‡∫û‡∫≤‡∫î‡ªÉ‡∫ô‡∫Å‡∫≤‡∫ô‡∫™‡∫±‡ªà‡∫á‡∫ä‡∫∑‡ªâ: " + error.message);
            }
        }

        // ** 1. ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Cart System) **
        let cart = JSON.parse(localStorage.getItem('fuji_mobile_cart')) || [];
        const cartCountElement = document.getElementById('cart-count');
        const cartItemsElement = document.getElementById('cartItems');
        const cartTotalElement = document.getElementById('cartTotal');
        const emptyCartMessage = document.getElementById('emptyCartMessage');
        const clearCartBtn = document.getElementById('clearCartBtn');
        const checkoutBtn = document.getElementById('checkoutBtn');

        function updateCartDisplay() {
            cartCountElement.textContent = cart.reduce((total, item) => total + item.quantity, 0);
            cartItemsElement.innerHTML = '';
            let total = 0;

            if (cart.length === 0) {
                emptyCartMessage.style.display = 'block';
                checkoutBtn.disabled = true;
            } else {
                emptyCartMessage.style.display = 'none';
                checkoutBtn.disabled = false;
                cart.forEach((item, index) => {
                    const price = parsePriceLAK(item.price);
                    total += price * item.quantity;

                    const li = document.createElement('li');
                    li.className = 'list-group-item';
                    li.innerHTML = `
                        <div class="item-details">
                            <h6 class="mb-1">${item.name}</h6>
                            <small>${formatPriceLAK(price)} x ${item.quantity}</small>
                        </div>
                        <div class="item-actions">
                            <button class="btn btn-sm btn-outline-secondary" onclick="updateQuantity(${index}, 1)">+</button>
                            <button class="btn btn-sm btn-outline-secondary" onclick="updateQuantity(${index}, -1)">-</button>
                            <button class="btn btn-sm btn-danger" onclick="removeItem(${index})">‡∫•‡∫ª‡∫ö</button>
                        </div>
                    `;
                    cartItemsElement.appendChild(li);
                });
            }

            cartTotalElement.textContent = formatPriceLAK(total);
            localStorage.setItem('fuji_mobile_cart', JSON.stringify(cart));
        }

        window.addToCart = (product) => {
            const existingItem = cart.find(item => item.name === product.name);
            const cleanPrice = parsePriceLAK(product.price).toString();
            const productToCart = { name: product.name, price: cleanPrice };

            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ ...productToCart, quantity: 1 });
            }

            updateCartDisplay();
            trackEvent('add_to_cart', { product: product.name, price: cleanPrice, quantity: 1 });
            alert(`‡ªÄ‡∫û‡∫µ‡ªà‡∫° ${product.name} ‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡∫Å‡∫∞‡∫ï‡ªà‡∫≤‡ªÅ‡∫•‡ªâ‡∫ß! ‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡ªÉ‡∫ô‡∫Å‡∫∞‡∫ï‡ªà‡∫≤: ${cart.find(item => item.name === product.name).quantity}`);
        };

        window.updateQuantity = (index, change) => {
            cart[index].quantity += change;
            if (cart[index].quantity <= 0) {
                cart.splice(index, 1);
            }
            updateCartDisplay();
        };

        window.removeItem = (index) => {
            cart.splice(index, 1);
            updateCartDisplay();
        };

        clearCartBtn.addEventListener('click', () => {
            if (confirm('‡∫ó‡ªà‡∫≤‡∫ô‡∫ï‡ªâ‡∫≠‡∫á‡∫Å‡∫≤‡∫ô‡∫•‡ªâ‡∫≤‡∫á‡∫Å‡∫∞‡∫ï‡ªà‡∫≤‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î‡ªÅ‡∫°‡ªà‡∫ô‡∫ö‡ªç‡ªà?')) {
                cart = [];
                localStorage.removeItem('fuji_mobile_cart');
                updateCartDisplay();
                trackEvent('clear_cart', {});
            }
        });

        // NEW: ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏à‡∏∞‡πÄ‡∏õ‡∏¥‡∏î Modal ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
        checkoutBtn.addEventListener('click', () => {
            if (cart.length === 0) {
                alert('‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤‡∫•‡∫ª‡∫á‡ªÉ‡∫ô‡∫Å‡∫∞‡∫ï‡ªà‡∫≤‡∫Å‡ªà‡∫≠‡∫ô‡∫™‡∫±‡ªà‡∫á‡∫ä‡∫∑‡ªâ');
                return;
            }

            // ‡∏õ‡∏¥‡∏î Cart Modal
            const cartModalInstance = bootstrap.Modal.getInstance(cartModalEl);
            if (cartModalInstance) cartModalInstance.hide();

            // ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏¥‡∏î Customer Info Modal
            updateCustomerInfoDisplay();
            customerInfoModal.show();

            trackEvent('checkout_click', { item_count: cart.length });
        });

        // ** 2. Countdown system **
        const countdownStartsKey = 'fuji_mobile_countdown_starts';
        let countdownStarts = JSON.parse(localStorage.getItem(countdownStartsKey)) || {};
        const DURATION_MS = 24 * 60 * 60 * 1000;

        function getStartTimestamp(key) {
            if (!countdownStarts[key] || (Date.now() - countdownStarts[key] > DURATION_MS + 60000)) {
                const newStartTime = Date.now();
                countdownStarts[key] = newStartTime;
                localStorage.setItem(countdownStartsKey, JSON.stringify(countdownStarts));
                return newStartTime;
            }
            return countdownStarts[key];
        }

        function updateCountdown(key, element) {
            const startTime = getStartTimestamp(key);
            const endTime = startTime + DURATION_MS;
            const now = Date.now();
            const distance = endTime - now;

            if (distance < 0) {
                element.textContent = "‡ªÇ‡∫õ‡∫£‡ªÇ‡∫°‡∫ä‡∫±‡ªà‡∫ô‡∫´‡∫°‡∫ª‡∫î‡∫≠‡∫≤‡∫ç‡∫∏‡ªÅ‡∫•‡ªâ‡∫ß";
                delete countdownStarts[key];
                localStorage.setItem(countdownStartsKey, JSON.stringify(countdownStarts));
                return;
            }

            const hours = Math.floor((distance % DURATION_MS) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            const displayHours = String(hours).padStart(2, '0');
            const displayMinutes = String(minutes).padStart(2, '0');
            const displaySeconds = String(seconds).padStart(2, '0');

            element.textContent = `‚è∞ ‡ªÄ‡∫ß‡∫•‡∫≤‡∫ô‡∫±‡∫ö‡∫ñ‡∫≠‡∫ç‡∫´‡∫•‡∫±‡∫á: ${displayHours}:${displayMinutes}:${displaySeconds}`;
        }

        const countdownIntervals = {};

        function renderProducts(category, containerId, limit = 0) {
            const container = document.getElementById(containerId);
            onValue(dbRef(db, 'products/' + category), (snapshot) => {
                const data = snapshot.val() || {};
                container.innerHTML = '';
                Object.values(countdownIntervals).forEach(clearInterval);

                const keys = Object.keys(data);
                const useKeys = (limit && keys.length) ? keys.slice(0, limit) : keys;

                useKeys.forEach((key, index) => {
                    const p = data[key];
                    const displayPrice = formatPriceLAK(parsePriceLAK(p.price));
                    const productDataForCart = JSON.stringify({ name: p.name, price: parsePriceLAK(p.price).toString() });

                    const countdownKey = `${category}-${key}`;

                    const col = document.createElement('div');
                    col.className = 'col-6 col-md-3 mb-3';

                    col.innerHTML = `
                        <div class="card product-card h-100">
                            <img src="${p.imageUrl}" class="card-img-top" alt="${p.name}">
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title">${p.name}</h5>
                                <p class="card-text muted mb-1">${p.description || '‡∫•‡∫≤‡∫ç‡∫•‡∫∞‡∫≠‡∫Ω‡∫î‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤...'}</p>
                                <p class="card-text price mt-auto mb-2">${displayPrice}</p>
                                <p class="countdown" id="countdown-${countdownKey}">Loading timer...</p>
                                <button class="btn btn-primary buy-btn" data-product='${productDataForCart}'
                                    onclick='addToCart(${productDataForCart})'>
                                    ‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡∫Å‡∫∞‡∫ï‡ªà‡∫≤
                                </button>
                            </div>
                        </div>
                    `;
                    container.appendChild(col);

                    const countdownElement = document.getElementById(`countdown-${countdownKey}`);
                    updateCountdown(countdownKey, countdownElement);
                    countdownIntervals[countdownKey] = setInterval(() => {
                        updateCountdown(countdownKey, countdownElement);
                    }, 1000);
                });
            });
        }

        // ** 3. Load products **
        renderProducts('cases', 'cases-row');
        renderProducts('bestSeller', 'best-seller-row');
        renderProducts('cables', 'cables-row');
        renderProducts('phones', 'phones-row');
        renderProducts('welcomeProducts', 'welcome-products-row');

        updateCartDisplay();
        updateCustomerInfoDisplay();

        // *******************************************************************
        // ** Comment system
        // *******************************************************************
        const commentRef = dbRef(db, "comments");

        const nameInput = document.getElementById("nameInput");
        const commentInput = document.getElementById("commentInput");
        const sendCommentBtn = document.getElementById("sendCommentBtn");
        const commentList = document.getElementById("commentList");

        sendCommentBtn.addEventListener("click", postComment);

        function postComment() {
            const name = nameInput.value.trim();
            const comment = commentInput.value.trim();

            if (!name || !comment) {
                alert("‡πÇ‡∏õ‡∏£‡∏î‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á");
                return;
            }

            push(commentRef, {
                name: name,
                comment: comment,
                reply: "",
                time: Date.now()
            }).then(() => {
                commentInput.value = "";
                trackEvent('post_comment', { name: name });
            }).catch((err) => {
                console.error("Error posting comment:", err);
            });
        }

        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏ö‡∏ö realtime
        onValue(commentRef, (snapshot) => {
            const data = snapshot.val() || {};
            commentList.innerHTML = "";

            for (let id in data) {
                const item = data[id];

                const div = document.createElement("div");
                div.className = "comment-box";
                div.innerHTML = `
                    <b>${item.name}</b><br>
                    <p>${item.comment}</p>

                    <div class="actions">
                        <button class="edit-btn" onclick="editComment('${id}', '${encodeURIComponent(item.comment)}')">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                        <button class="delete-btn" onclick="deleteComment('${id}')">‡∏•‡∏ö</button>
                        <button class="reply-btn" onclick="replyComment('${id}')">‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö</button>
                    </div>

                    ${item.reply ? `<div class='reply-box'>üí¨ <b>Reply:</b> ${item.reply}</div>` : ""}
                `;

                commentList.appendChild(div);
            }
        });

        // ‡∏•‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô
        window.deleteComment = function (id) {
            remove(dbRef(db, "comments/" + id)).then(() => {
                trackEvent('delete_comment', { id });
            });
        };

        // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
        window.editComment = function (id, oldTextEncoded) {
            const oldText = decodeURIComponent(oldTextEncoded);
            const newText = prompt("‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô:", oldText);
            if (newText !== null) {
                update(dbRef(db, "comments/" + id), { comment: newText }).then(() => {
                    trackEvent('edit_comment', { id });
                });
            }
        };

        // ‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö
        window.replyComment = function (id) {
            const reply = prompt("‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö:");
            if (reply !== null) {
                update(dbRef(db, "comments/" + id), { reply: reply }).then(() => {
                    trackEvent('reply_comment', { id });
                });
            }
        };

        // *******************************************************************
        // ** Ask via Whatsapp
        // *******************************************************************
        document.getElementById("askSend").addEventListener("click", function () {
            const phone = "8562098614336";
            const img = document.getElementById("askImage").value.trim();
            const txt = document.getElementById("askText").value.trim();

            let message =
                `‡∫Ç‡ªç‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡ªÄ‡∫ï‡∫µ‡∫° ‡∏´‡∏ô‡πà‡∏≠‡∏¢‡∏Ñ‡∏±‡∏ö
‡∫•‡∫≤‡∫ç‡∫•‡∫∞‡∫≠‡∫Ω‡∫î: ${txt}
‡∫Æ‡∫π‡∫ö : ${img}`;

            const url = "https://api.whatsapp.com/send?phone=" + phone + "&text=" + encodeURIComponent(message);

            window.open(url, "_blank");
        });

        // *******************************************************************
        // ** Visitor Tracker Firebase
        // *******************************************************************
        (function () {
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå
            function getDevice() {
                const ua = navigator.userAgent.toLowerCase();
                if (ua.includes("iphone")) return "iPhone";
                if (ua.includes("android")) return "Android Phone";
                if (ua.includes("windows")) return "Windows Computer";
                if (ua.includes("mac")) return "Mac Computer";
                return "Unknown Device";
            }

            // ‡∏î‡∏∂‡∏á IP ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
            async function getIP() {
                try {
                    const res = await fetch("https://api.ipify.org?format=json");
                    const data = await res.json();
                    return data.ip;
                } catch {
                    return "IP Blocked";
                }
            }

            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤ Firebase
            async function saveVisitor() {
                const ip = await getIP();

                const data = {
                    time: new Date().toLocaleString(),
                    device: getDevice(),
                    ip: ip,
                    url: window.location.href,
                    userAgent: navigator.userAgent
                };

                await push(dbRef(db, "visitorLogs"), data);
            }

            saveVisitor();
        })();

    </script>

</body>

</html>
